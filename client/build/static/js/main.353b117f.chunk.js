(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,r){e.exports=r(79)},48:function(e,t,r){},70:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(30),o=r.n(c),i=r(10),u=r(31),s=r(7),l=r(9),d=r(11),m=(r(48),function(){return n.a.createElement("div",{className:"ui one column centered grid",id:"header-container"},n.a.createElement("h1",{id:"header-text"},"Search a country for its top 10 on Spotify"))}),p=r(33),h=r(34),f=r(37),E=r(35),y=r(38),b=r(14),g=r.n(b),v=r(20),T=r(21),k=r.n(T),w=[{country:"united kingdom",id:"37i9dQZEVXbLnolsZ8PSNw"},{country:"united states",id:"37i9dQZEVXbLRQDuF5jeBp"},{country:"france",id:"37i9dQZEVXbIPWwFssbupI"},{country:"singapore",id:"37i9dQZEVXbK4gjvS1FjPY"},{country:"brazil",id:"37i9dQZEVXbMXbN3EUUhlg"},{country:"argentina",id:"37i9dQZEVXbMMy2roB9myp"},{country:"australia",id:"37i9dQZEVXbJPcfkRz0wJ0"},{country:"austria",id:"37i9dQZEVXbKNHh6NIXu36"},{country:"belgium",id:"37i9dQZEVXbJNSeeHswcKB"},{country:"bolivia",id:"37i9dQZEVXbJqfMFK4d691"},{country:"bulgaria",id:"37i9dQZEVXbNfM2w2mq1B8"},{country:"canada",id:"37i9dQZEVXbKj23U1GF4IR"},{country:"chile",id:"37i9dQZEVXbL0GavIqMTeb"},{country:"colombia",id:"37i9dQZEVXbOa2lmxNORXQ"},{country:"costa rica",id:"37i9dQZEVXbMZAjGMynsQX"}],N=function(e){return{type:"ERROR_TOGGLE",payload:e}},O=(r(70),function(e){function t(){var e,r;Object(p.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(n)))).componentDidMount=function(){r.props.grabToken()},r.searchFieldProcessor=function(){r.props.searchTerm.length<1?r.props.errorToggler("Please enter a country"):(r.props.errorToggler(""),r.props.fetchSongs(r.props.token,r.props.searchTerm),r.props.clearSearchTerm())},r.fetchSongsHandler=function(){r.searchFieldProcessor()},r.searchFieldUpdater=function(e){e.preventDefault(),r.props.updateSearchTerm(e.target.value),r.props.updateCountry(e.target.value)},r.onKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),r.searchFieldProcessor(),r.props.history.push("/results"))},r}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"ui one column centered grid",id:"search-bar-container"},n.a.createElement("form",null,n.a.createElement("div",{className:"ui input"},n.a.createElement("input",{id:"search-bar",type:"search",placeholder:"Search for a country...",onKeyPress:this.onKeyPress,onChange:this.searchFieldUpdater,value:this.props.searchTerm,required:!0})))),n.a.createElement("div",{className:"ui one column centered grid",id:"search-button-container"},n.a.createElement(l.b,{to:"/results"},n.a.createElement("button",{className:"ui button orange",id:"search-button",onClick:this.fetchSongsHandler},"Search"))))}}]),t}(n.a.Component)),S=Object(d.f)(Object(s.b)(function(e){return{searchTerm:e.searchTerm,token:e.token,error:e.error,tracks:e.tracks}},{fetchSongs:function(e,t){return function(){var r=Object(v.a)(g.a.mark(function r(a){var n,c,o,i,u,s;return g.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(n=t.toLowerCase(),c="",o=0;o<w.length;o++)w[o].country===n&&(c=w[o].id);if(!(c.length<1)){r.next=7;break}a({type:"ERROR_TOGGLE",payload:"Sorry, that country was not found"}),r.next=13;break;case 7:return r.next=9,k()({method:"get",url:"https://api.spotify.com/v1/playlists/".concat(c,"/tracks"),headers:{authorization:"Bearer "+e},params:{limit:10}});case 9:if(i=r.sent,u=[],0===i.data.items.length)a({type:"ERROR_TOGGLE",payload:"Your search returned no results"});else if(i.data.items.length>0)for(s=0;s<10;s++)u.push(i.data.items[s]);a({type:"FETCH_PLAYLISTS",payload:u});case 13:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},grabToken:function(){return function(){var e=Object(v.a)(g.a.mark(function e(t){var r,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("/spotify-authorization");case 2:r=e.sent,a=r.data,t({type:"GRAB_TOKEN",payload:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},clearSearchTerm:function(){return{type:"CLEAR_SEARCH"}},updateSearchTerm:function(e){return{type:"SEARCH_TERM",payload:e}},updateCountry:function(e){return{type:"COUNTRY_SELECTED",payload:e}},errorToggler:N})(O)),R=(r(76),Object(d.f)(Object(s.b)(function(e){return{error:e.error}},{errorToggler:N})(function(e){var t=""!==e.error?n.a.createElement("div",{className:"ui floating warning message warning-message"},n.a.createElement("i",{className:"close icon",onClick:function(){e.errorToggler("")}}),n.a.createElement("div",{className:"header"},e.error)):null;return n.a.createElement("div",{className:"ui one column centered grid",id:"error-container"},t)}))),j=(r(77),function(){return n.a.createElement("div",{className:"ui container",id:"home-container"},n.a.createElement(R,null),n.a.createElement(m,null),n.a.createElement(S,null))}),C=Object(s.b)(function(e){return{searchTerm:e.searchTerm,tracks:e.tracks}},{errorToggler:N})(function(){return n.a.createElement("div",{className:"ui inverted top fixed secondary menu"},n.a.createElement("div",{className:"item"},n.a.createElement(l.b,{to:"/"},n.a.createElement("button",{className:"ui inverted orange button"},"Home"))))}),X=(r(78),Object(d.f)(Object(s.b)(function(e){return{tracks:e.tracks,error:e.error,country:e.countrySearched}})(function(e){var t=e.tracks,r=t.map(function(e){return n.a.createElement("div",{key:e.track.id,className:"ui one column centered grid track-item"},n.a.createElement("div",{className:"row"},n.a.createElement("h3",null,t.indexOf(e)+1)),n.a.createElement("div",{className:"row"},n.a.createElement("p",null,"Artist: ",e.track.artists[0].name)),n.a.createElement("div",{className:"row"},n.a.createElement("p",null,"Track: ",e.track.name)),n.a.createElement("div",{className:"row"},n.a.createElement("iframe",{title:e.track.name,src:"https://embed.spotify.com/?uri=".concat(e.track.uri,"&theme=white&view=coverart"),width:"300",height:"80",frameBorder:"0",allowtransparency:"true"})))});return e.error?n.a.createElement(d.a,{to:"/"}):n.a.createElement("div",{className:"ui container track-list-container"},n.a.createElement(C,null),n.a.createElement("h1",{className:"centered-header"},"".concat(e.country," Top 10 on Spotify")),r)}))),Q=function(){return n.a.createElement("h1",null,"Not found")},Z=function(e){var t=e.store;return n.a.createElement(s.a,{store:t},n.a.createElement(l.a,null,n.a.createElement(d.d,null,n.a.createElement(d.b,{path:"/",exact:!0,component:j}),n.a.createElement(d.b,{path:"/results",component:X}),n.a.createElement(d.b,{component:Q}))))},L=Object(i.c)({tracks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PLAYLISTS":return t.payload;default:return e}},searchTerm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_TERM":return t.payload;case"CLEAR_SEARCH":return"";default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GRAB_TOKEN":return t.payload;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_TOGGLE":return t.payload;default:return e}},countrySearched:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COUNTRY_SELECTED":return t.payload;default:return e}}}),V=Object(i.d)(L,Object(i.a)(u.a));o.a.render(n.a.createElement(Z,{store:V}),document.querySelector("#root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.353b117f.chunk.js.map